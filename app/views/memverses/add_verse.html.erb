<% page_title I18n.t :add_new_verses, :scope => 'page_titles' %>
<% page_banner I18n.t :add_new_verses, :scope => 'page_titles' %>
<% page_description I18n.t :add_new_verses, :scope => 'page_descriptions' %>
<!-- Focus cursor on verse entry box -->
<body onload="document.getElementById('verse').focus()">

<!-- Add a verse -->	
<fieldset id="add_verse_form">
	<legend> Enter a Bible Verse </legend>
		<% form_tag :action => 'add_verse' do %>
		  <ul>
		  	<li>
				<div class="box-label">Verse:</div><%= text_field_tag(:verse, params[:verse] )%>
				<img class="spinner" id="ajax_spinner" src="/images/indicator2.gif" alt="Searching ..." style="display: none" /> 
				<!-- http://www.ajaxload.info/ -->
			</li>
			<li>
				<div class="box-label">Translation:</div>
						<!-- Now need to add new translations to profile page but not anywhere else unless a major translation -->
						<%= select_tag(:translation, 
									options_for_select([["New International Version (1984)",	'NIV' ],
														["New International Version (2010)",	'NNV' ],
														["New American Standard Bible", 		'NAS' ], 
														["New King James Version",				'NKJ' ], 
														["King James Version",					'KJV' ], 
														["Revised Standard Version",  			'RSV' ], 
														["New Revised Standard Version",  		'NRS' ], 														
														["English Standard Version", 			'ESV' ],
                            							["New Living Translation",        		'NLT' ],
                            							["Holman Christian Standard Bible",		'HCS' ],
                            							["Darby Translation",					'DTL' ],
                            							["The Message",                   		'MSG' ],
                            							["Amplified Bible",                		'AMP' ],
														["New International Reader's Version", 	'IRV' ],
														["Updated King James Version",		 	'UKJ' ],
														["Geneva Bible",					 	'GEN' ],
														["Biblical Greek", 						'GRK' ],
														["Nueva Version Internacional",			'NVI' ],
														["Reina-Valera 1960",					'RVR' ],
														["Louis Segond 1910",					'LSV' ],
														["Afrikaans 1983 Translation",			'AFR' ],
														["Herziene Statenvertaling",			'HSV' ],
														["De Nieuwe Bijbelvertaling",			'NBV' ],
														["Terjemahan Baru",						'TMB' ],
														["Svenska Folkbibeln",					'SPB' ]],
									params[:translation])) %>
			</li>									
		  </ul>
		  
		  <p>
		  	<%= text_area_tag(:versetext, params[:versetext], :overflow => "hidden" )%>
		  </p>	
			
		  <p align="left"><%= submit_tag "Add Verse", :class => "submit" %></p>								
		
		<% end %>				
</fieldset>		

<!-- Available translations -->		
<fieldset id="avail-translations" class="entry-form">
	<legend>Available Translations</legend>
		<div id="foundVerse" class="no-dbl-click">
			<%= render :partial=>'avail_translations' %>			
		</div>
</fieldset>	



<!-- Popular verses -->		
<div>
		<%= render :partial=>'popular_verses' %>			
</div>


<!-- http://www.webdesignerwall.com/tutorials/jquery-tutorials-for-designers/ -->
<!-- Verse will enter from the 'show' coordinate and will depart to the "hide" coordinate --> 
<!-- 'Hide' position should be the same as the position specified in the CSS stylesheet i.e. the starting position --> 
<script type="text/javascript">
	$(document).ready(function(){
	
		$(".menu a").hoverIntent(function() {
			$(this).next("em").animate({opacity: "show", left: "375"}, "slow");
		}, function() {
			$(this).next("em").animate({opacity: "hide", left: "410"}, "medium");
		});
		
		
		$("#verse").observe_field(0.3, function( ) { 
			$.get("/avail_translations", { verse: this.value },
				function(data){	
					$("#foundVerse").html(data);
			});
        });		
		
		$('.spinner')
			.ajaxStart(function() {
		        $(this).show();
		    })
			.ajaxStop(function() {
		        $(this).hide();
	    }); 		
		
	});
</script>

<!-- Prevent double-clicking of links to add verses -->
<script type="text/javascript">
	$(document).ready(function(){
		$('.no-dbl-click').click( function() {
			$(this).attr('disabled', 'disabled').hide();
		});
	});
</script>

<!-- http://www.devbridge.com/projects/autocomplete/jquery/ -->
<script type="text/javascript">
	$(document).ready(function(){
		
	
	  $('#verse').autocomplete({ lookup: ['Genesis', 'Exodus', 'Leviticus', 'Numbers', 'Deuteronomy', 'Joshua', 'Judges', 'Ruth', '1 Samuel', '2 Samuel',
	                '1 Kings', '2 Kings','1 Chronicles', '2 Chronicles', 'Ezra', 'Nehemiah', 'Esther', 'Job', 'Psalm', 'Proverbs',
	                'Ecclesiastes', 'Song of Songs', 'Isaiah', 'Jeremiah', 'Lamentations', 'Ezekiel', 'Daniel', 'Hosea', 'Joel', 
	                'Amos', 'Obadiah', 'Jonah', 'Micah', 'Nahum', 'Habakkuk', 'Zephaniah', 'Haggai', 'Zechariah', 'Malachi', 'Matthew',
	                'Mark', 'Luke', 'John', 'Acts', 'Romans', '1 Corinthians', '2 Corinthians', 'Galatians', 'Ephesians', 'Philippians',
	                'Colossians', '1 Thessalonians', '2 Thessalonians', '1 Timothy', '2 Timothy', 'Titus', 'Philemon', 'Hebrews', 'James',
	                '1 Peter', '2 Peter', '1 John', '2 John', '3 John', 'Jude', 'Revelation']						
	   });	   
	});
</script>

