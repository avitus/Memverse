<% page_title I18n.t :global_stats, :scope => 'page_titles' %>
<% page_description I18n.t :global_stats, :scope => 'page_descriptions' %>

<div class="white-box-with-margins">

	<div id="container" style="width: 100%; height: 500px"></div>
	
	<br>
	
	<div>
		<p>
			This is the most important leaderboard. Denominations were man's idea; God only has one church. 
		</p>
		
		<p>
			Memverse has <%= number_with_delimiter(@global_users) %> active users as of <%= @last_entry %>. 
			As a church, we have <%= number_with_delimiter(Memverse.memorized.count) %> verses memorized.
		</p>
	</div>
</div>


<script type="text/javascript">

var chart; // globally available

$(document).ready(function() {
	
	Highcharts.setOptions({
	    colors: ['#6b9620', '#50B432', '#ED561B', '#DDDF00', '#24CBE5', '#64E572', '#FF9655', '#FFF263', '#6AF9C4']
	});	
	
	var options = {
	    credits: {
	        text: 'Memverse.com',
	        href: 'http://www.memverse.com'
	    },
		chart: {
			renderTo: 'container',
			defaultSeriesType: 'column'
		},
		
		title: {
			text: 'Memorized Verses',
	        style: {
	            color: '#333333',
	            fontWeight: 'bold'
	        }			
		},
		xAxis: {
			categories: [],
			type: 'datetime',
			dateTimeLabelFormats: {
            	month: '%b \'%y' 
            }
		},
		yAxis: {
			title: {
				text: 'Verses',
		        style: {
		            color: '#333333',
		            fontWeight: 'bold'
		        }				
			},
		},
	    legend: {
	        itemStyle: {
	            color: '#333333',
	            fontWeight: 'bold'
	        }
	    },		
		plotOptions: {
		   area: {
		      fillColor: {
		         linearGradient: [0, 0, 0, 300],
		         stops: [
		            [0, '#6b9620'],
		            [1, 'rgba(2,0,0,0)']
		         ]
		      },
		      lineWidth: 1,
		      lineColor: '#6b9620',
		      marker: {
		         enabled: false,
		         states: {
		            hover: {
		               enabled: true,
		               radius: 5
		            }
		         }
		      },
		      shadow: false,
		      states: {
		         hover: {
		            lineWidth: 1                  
		         }
		      }
		   }
		},		
		series: []
	};	
	

				
	$.get('/global_data.json', function(data) {
		
		var learning_data  = { data: [] };
		var memorized_data = { data: [] };
        	        
    	learning_data.data = data[0];
    	learning_data.name = "Learning"

    	memorized_data.data = data[1];
    	memorized_data.name = "Memorized"

		options.series.push(learning_data);
		options.series.push(memorized_data);


    	// global_data.data.memorized = data[1];
    	// global_data.data.users     = data[2];
		
		// options.series.push(global_data);

	    // Create the chart
	    var chart = new Highcharts.Chart(options);				
							 			 
	}, "json" );

});

</script>