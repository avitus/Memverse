<div class="white-box-with-margins">
<h1>Editing Question</h1>

<%= form_for(@question, :as => :quiz_question, :url => { :action => "update" }, :html => { :multipart => true }) do |f| %>

	<% if @question.errors.any? %>
	  <div id="errorExplanation">
		<h2><%= pluralize(@question.errors.count, "error") %> prohibited this quiz from being saved:</h2>
		<ul>
		<% @question.errors.full_messages.each do |msg| %>
		  <li><%= msg %></li>
		<% end %>
		</ul>
	  </div>
	<% end %>

  	<p>
		<%= f.label 		:question_no, "Question number" %><br />
		<%= f.select 		:question_no, (1..20) %>
  	</p>
  	<p>
		<%= f.label 		:question_type, "Type of question" %><br />
		<%= f.select		:question_type, [
									['Recite verse',	'recitation'], 
									['Give reference',	'reference'	], 
									['Multiple Choice',	'mcq'		]],
							{}, {:onchange => "questionType(this.value)"} %>
  	</p>

  	<p id="passage">
		<%= f.label 		:passage, "Passage Reference" %><br />
		<%= f.text_field 	:passage %>	 	  		
  	</p>
  	<div id="mcq">
  	<p>
		<%= f.label 		:mc_question, "Question text" %><br />
		<%= f.text_area 	:mc_question, :size => "", :style => "height:40px;width:215px" %>
	</p>

  	<p>
		<%= f.label 		:mc_option_a, "Answer A" %><br />
		<%= f.text_field 	:mc_option_a %>
	</p>

  	<p>
		<%= f.label 		:mc_option_b, "Answer B" %><br />
		<%= f.text_field 	:mc_option_b %>
	</p>

  	<p>
		<%= f.label 		:mc_option_c, "Answer C" %><br />
		<%= f.text_field 	:mc_option_c %>
	</p>

  	<p>
		<%= f.label 		:mc_option_d, "Answer D" %><br />
		<%= f.text_field 	:mc_option_d %>
	</p>				
	<p>
		<%= f.label 		:mc_answer, "Correct answer" %><br />
		<%= f.text_field 	:mc_answer %>
	</p>
	</div>
  <p>
    <%= f.submit 'Update' %>
  </p>
<% end %>

<%= link_to 'Show', @quiz %> |
<%= link_to 'Back', quizzes_path %>
</div>
<script type="text/javascript">
$passage = $("p#passage");
$mcq = $("div#mcq");
function questionType(qtype) {
	if (qtype == 'mcq') {
		$passage.hide();
		$mcq.show();
	}
	else {
		$passage.show();
		$mcq.hide();
	}
}
questionType($("select#quiz_question_question_type").val()); // setup the page based on what's selected at load time
</script>