$(document).ready(function(){$('tbody tr').addClass('visible');$('#searchico').show();$('#vsfilter').hide();$('#searchico').click(function(){$('#vsfilter').slideToggle(400);return false});$('input[name="filter"]').addClass("idleField");$('input[name="filter"]').focus(function(){$(this).removeClass("idleField").addClass("focusField");if(this.value==this.defaultValue){this.value=''}if(this.value!=this.defaultValue){this.select()}});$('input[name="filter"]').blur(function(){$(this).removeClass("focusField").addClass("idleField");if($.trim(this.value=='')){this.value=(this.defaultValue?this.defaultValue:'')}});$('#filter').keyup(function(event){if(event.keyCode==27||$(this).val()==''){$(this).val('');$('tbody tr').removeClass('visible').show().addClass('visible')}else{filter('tbody tr',$(this).val())}})});function filter(selector,query){$(selector).each(function(){($(this).text().search(new RegExp(query,"i"))<0)?$(this).hide().removeClass('visible'):$(this).show().addClass('visible')})}function checkAllFields(ref){var chkAll=document.getElementById('checkAll');var visiblechecks=$('input[name="mv[]"]:visible');var invisiblechecked=$('input[name="mv[]"]').not(':visible');var visibleboxLength=visiblechecks.length;var invisibleboxLength=invisiblechecked.length;var allChecked=false;var totalChecked=0;if(ref==1){if(chkAll.checked==true){for(i=0;i<visibleboxLength;i++)visiblechecks[i].checked=true}else{for(i=0;i<visibleboxLength;i++)visiblechecks[i].checked=false}}if(ref==2){for(i=0;i<visibleboxLength;i++){if(visiblechecks[i].checked==true){allChecked=true;continue}else{allChecked=false;break}}if(allChecked==true)chkAll.checked=true;else chkAll.checked=false}for(j=0;j<visibleboxLength;j++){if(visiblechecks[j].checked==true)totalChecked++}if(ref==3){for(k=0;k<invisibleboxLength;k++)invisiblechecked[k].checked=false;if(totalChecked==1){var agree=confirm(I18n.t("js_msgs.delete_one"));if(agree){document.manage_verses.action='/memverses/delete_verses';return true}else{return false}}else if(totalChecked==0){alert(I18n.t("js_msgs.none_selected"));return false}else if(totalChecked==visibleboxLength){var agree=confirm(I18n.t("js_msgs.all_selected",{quantity:totalChecked}));if(agree){document.manage_verses.action='/memverses/delete_verses';return true}else return false}else{var agree=confirm(I18n.t("js_msgs.some_selected",{quantity:totalChecked}));if(agree){document.manage_verses.action='/memverses/delete_verses';return true}else return false}}if(ref==4){for(k=0;k<invisibleboxLength;k++)invisiblechecked[k].checked=false;if(totalChecked==0){alert(I18n.t("js_msgs.none_selected"));return false}else{return true}}}function update_upcoming(num_verses,mv_id){$.ajax({url:'/upcoming_verses',dataType:'html',async:true,data:{mv_id:mv_id},success:function(data){$("#upcoming-verses").html(data)}})}function log_progress(user_id){$.ajax({url:'/save_progress_report',dataType:'json',async:false,data:{user_id:user_id},success:function(data){}})}function stageverses(mv_current){var finished;var mv={};var mv_skip={};var mv_prior={};var mv_prior_skip={};$.ajax({url:'/test_next_verse',dataType:'json',async:false,data:{mv:mv_current},success:function(data){finished=data.finished;if(!finished){mv=data.mv;mv_skip=data.mv_skip;mv_prior=data.prior_mv;mv_prior_skip=data.prior_mv_skip}}});return{finished:finished,mv:mv,mv_skip:mv_skip,mv_prior:mv_prior,mv_prior_skip:mv_prior_skip}}function insertondeck(ondeck,ondeck_prior){$(".verse-ref").text(ondeck.ref);$(".verse-tl").text(' ['+ondeck.tl+']');$("#verseguess").val('');$("#verseguess").focus();$("#ajaxWrapper").text('');$('.quickFlip').quickFlipper({},0);$("#flashcard-back-text #current-text").text(ondeck.text);$(".current-versenum").text(ondeck.versenum);$('#ff-button').toggle(ondeck.skippable);$('.mnemonic').text('');$('.mnemonic').text(ondeck.mnemonic);if(typeof(ondeck_prior)!=='undefined'&&ondeck_prior!=null){$(".priorVerse").show();$(".prior-text").text(ondeck_prior.text);$(".prior-versenum").text(ondeck_prior.versenum)}else{$(".priorVerse").hide()}return true}
